{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akmor\\\\OneDrive\\\\Projects\\\\website\\\\src\\\\components\\\\ScrollStack.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport Lenis from 'lenis';\nimport './ScrollStack.css';\n\n// PillNav-style menu item for dropdowns and lists\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PillMenuItem({\n  label,\n  active = false,\n  onClick,\n  style = {},\n  children,\n  ...props\n}) {\n  return /*#__PURE__*/_jsxDEV(\"a\", {\n    href: \"#\",\n    className: `pill${active ? ' is-active' : ''}`,\n    style: {\n      color: 'var(--pill-text)',\n      position: 'relative',\n      minWidth: 120,\n      margin: '6px 0',\n      display: 'inline-flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: '12px 24px',\n      fontWeight: 600,\n      fontSize: 16,\n      borderRadius: '9999px',\n      boxSizing: 'border-box',\n      textTransform: 'uppercase',\n      letterSpacing: '0.2px',\n      whiteSpace: 'nowrap',\n      cursor: 'pointer',\n      overflow: 'hidden',\n      transition: 'box-shadow 0.2s, transform 0.2s',\n      boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\n      ...style\n    },\n    \"aria-label\": label,\n    onClick: e => {\n      e.preventDefault();\n      onClick === null || onClick === void 0 ? void 0 : onClick();\n    },\n    ...props,\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"hover-circle\",\n      \"aria-hidden\": \"true\",\n      style: {\n        position: 'absolute',\n        left: '50%',\n        bottom: 0,\n        borderRadius: '50%',\n        background: 'var(--base, #000)',\n        width: '120%',\n        height: '200%',\n        transform: 'translateX(-50%)',\n        opacity: 0,\n        transition: 'opacity 0.3s'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"label-stack\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill-label\",\n        children: label || children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"pill-label-hover\",\n        \"aria-hidden\": \"true\",\n        children: label || children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 5\n  }, this);\n}\n_c = PillMenuItem;\nexport { PillMenuItem };\nexport const ScrollStackItem = ({\n  children,\n  itemClassName = ''\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `scroll-stack-card ${itemClassName}`.trim(),\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 65,\n  columnNumber: 3\n}, this);\n_c2 = ScrollStackItem;\nconst ScrollStack = ({\n  children,\n  className = '',\n  itemDistance = 100,\n  itemScale = 0,\n  itemStackDistance = 0,\n  stackPosition = '0%',\n  scaleEndPosition = '0%',\n  baseScale = 1,\n  scaleDuration = 0,\n  rotationAmount = 0,\n  blurAmount = 0,\n  useWindowScroll = false,\n  onStackComplete\n}) => {\n  _s();\n  const scrollerRef = useRef(null);\n  const stackCompletedRef = useRef(false);\n  const animationFrameRef = useRef(null);\n  const lenisRef = useRef(null);\n  const cardsRef = useRef([]);\n  const lastTransformsRef = useRef(new Map());\n  const isUpdatingRef = useRef(false);\n  const calculateProgress = useCallback((scrollTop, start, end) => {\n    if (scrollTop < start) return 0;\n    if (scrollTop > end) return 1;\n    return (scrollTop - start) / (end - start);\n  }, []);\n  const parsePercentage = useCallback((value, containerHeight) => {\n    if (typeof value === 'string' && value.includes('%')) {\n      return parseFloat(value) / 100 * containerHeight;\n    }\n    return parseFloat(value);\n  }, []);\n  const getScrollData = useCallback(() => {\n    if (useWindowScroll) {\n      return {\n        scrollTop: window.scrollY,\n        containerHeight: window.innerHeight,\n        scrollContainer: document.documentElement\n      };\n    } else {\n      const scroller = scrollerRef.current;\n      return {\n        scrollTop: scroller.scrollTop,\n        containerHeight: scroller.clientHeight,\n        scrollContainer: scroller\n      };\n    }\n  }, [useWindowScroll]);\n  const getElementOffset = useCallback(element => {\n    if (useWindowScroll) {\n      const rect = element.getBoundingClientRect();\n      return rect.top + window.scrollY;\n    } else {\n      return element.offsetTop;\n    }\n  }, [useWindowScroll]);\n  const updateCardTransforms = useCallback(() => {\n    var _scrollerRef$current;\n    if (!cardsRef.current.length || isUpdatingRef.current) return;\n    isUpdatingRef.current = true;\n    const {\n      scrollTop,\n      containerHeight\n    } = getScrollData();\n    const stackPositionPx = parsePercentage(stackPosition, containerHeight);\n    const scaleEndPositionPx = parsePercentage(scaleEndPosition, containerHeight);\n    const endElement = useWindowScroll ? document.querySelector('.scroll-stack-end') : (_scrollerRef$current = scrollerRef.current) === null || _scrollerRef$current === void 0 ? void 0 : _scrollerRef$current.querySelector('.scroll-stack-end');\n    const endElementTop = endElement ? getElementOffset(endElement) : 0;\n    cardsRef.current.forEach((card, i) => {\n      if (!card) return;\n      const cardTop = getElementOffset(card);\n      const triggerStart = cardTop - stackPositionPx - itemStackDistance * i;\n      const triggerEnd = cardTop - scaleEndPositionPx;\n      const pinStart = cardTop - stackPositionPx - itemStackDistance * i;\n      const pinEnd = endElementTop - containerHeight / 2;\n      const scaleProgress = calculateProgress(scrollTop, triggerStart, triggerEnd);\n      const targetScale = baseScale + i * itemScale;\n      const scale = 1 - scaleProgress * (1 - targetScale);\n      const rotation = rotationAmount ? i * rotationAmount * scaleProgress : 0;\n      let blur = 0;\n      if (blurAmount) {\n        let topCardIndex = 0;\n        for (let j = 0; j < cardsRef.current.length; j++) {\n          const jCardTop = getElementOffset(cardsRef.current[j]);\n          const jTriggerStart = jCardTop - stackPositionPx - itemStackDistance * j;\n          if (scrollTop >= jTriggerStart) {\n            topCardIndex = j;\n          }\n        }\n        if (i < topCardIndex) {\n          const depthInStack = topCardIndex - i;\n          blur = Math.max(0, depthInStack * blurAmount);\n        }\n      }\n      let translateY = 0;\n      const isPinned = scrollTop >= pinStart && scrollTop <= pinEnd;\n      if (isPinned) {\n        translateY = scrollTop - cardTop + stackPositionPx + itemStackDistance * i;\n      } else if (scrollTop > pinEnd) {\n        translateY = pinEnd - cardTop + stackPositionPx + itemStackDistance * i;\n      }\n      const newTransform = {\n        translateY: Math.round(translateY * 100) / 100,\n        scale: Math.round(scale * 1000) / 1000,\n        rotation: Math.round(rotation * 100) / 100,\n        blur: Math.round(blur * 100) / 100\n      };\n      const lastTransform = lastTransformsRef.current.get(i);\n      const hasChanged = !lastTransform || Math.abs(lastTransform.translateY - newTransform.translateY) > 0.1 || Math.abs(lastTransform.scale - newTransform.scale) > 0.001 || Math.abs(lastTransform.rotation - newTransform.rotation) > 0.1 || Math.abs(lastTransform.blur - newTransform.blur) > 0.1;\n      if (hasChanged) {\n        const transform = `translate3d(0, ${newTransform.translateY}px, 0) scale(${newTransform.scale}) rotate(${newTransform.rotation}deg)`;\n        const filter = newTransform.blur > 0 ? `blur(${newTransform.blur}px)` : '';\n        card.style.transform = transform;\n        card.style.filter = filter;\n        lastTransformsRef.current.set(i, newTransform);\n      }\n      if (i === cardsRef.current.length - 1) {\n        const isInView = scrollTop >= pinStart && scrollTop <= pinEnd;\n        if (isInView && !stackCompletedRef.current) {\n          stackCompletedRef.current = true;\n          onStackComplete === null || onStackComplete === void 0 ? void 0 : onStackComplete();\n        } else if (!isInView && stackCompletedRef.current) {\n          stackCompletedRef.current = false;\n        }\n      }\n    });\n    isUpdatingRef.current = false;\n  }, [itemScale, itemStackDistance, stackPosition, scaleEndPosition, baseScale, rotationAmount, blurAmount, useWindowScroll, onStackComplete, calculateProgress, parsePercentage, getScrollData, getElementOffset]);\n  const handleScroll = useCallback(() => {\n    updateCardTransforms();\n  }, [updateCardTransforms]);\n  const setupLenis = useCallback(() => {\n    if (useWindowScroll) {\n      const lenis = new Lenis({\n        duration: 1.2,\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true,\n        touchMultiplier: 2,\n        infinite: false,\n        wheelMultiplier: 0.8,\n        lerp: 0.1,\n        syncTouch: true,\n        syncTouchLerp: 0.075\n      });\n      lenis.on('scroll', handleScroll);\n      const raf = time => {\n        lenis.raf(time);\n        animationFrameRef.current = requestAnimationFrame(raf);\n      };\n      animationFrameRef.current = requestAnimationFrame(raf);\n      lenisRef.current = lenis;\n      return lenis;\n    } else {\n      const scroller = scrollerRef.current;\n      if (!scroller) return;\n      const lenis = new Lenis({\n        wrapper: scroller,\n        content: scroller.querySelector('.scroll-stack-inner'),\n        duration: 1.2,\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true,\n        touchMultiplier: 2,\n        infinite: false,\n        gestureOrientationHandler: true,\n        normalizeWheel: true,\n        wheelMultiplier: 1,\n        touchInertiaMultiplier: 35,\n        lerp: 0.1,\n        syncTouch: true,\n        syncTouchLerp: 0.075,\n        touchInertia: 0.6\n      });\n      lenis.on('scroll', handleScroll);\n      const raf = time => {\n        lenis.raf(time);\n        animationFrameRef.current = requestAnimationFrame(raf);\n      };\n      animationFrameRef.current = requestAnimationFrame(raf);\n      lenisRef.current = lenis;\n      return lenis;\n    }\n  }, [handleScroll, useWindowScroll]);\n  useLayoutEffect(() => {\n    const scroller = scrollerRef.current;\n    if (!scroller) return;\n    const cards = Array.from(useWindowScroll ? document.querySelectorAll('.scroll-stack-card') : scroller.querySelectorAll('.scroll-stack-card'));\n    cardsRef.current = cards;\n    const transformsCache = lastTransformsRef.current;\n    cards.forEach((card, i) => {\n      if (i < cards.length - 1) {\n        card.style.marginBottom = `${itemDistance}px`;\n      }\n      card.style.willChange = 'transform, filter';\n      card.style.transformOrigin = 'top center';\n      card.style.backfaceVisibility = 'hidden';\n      card.style.transform = 'translateZ(0)';\n      card.style.webkitTransform = 'translateZ(0)';\n      card.style.perspective = '1000px';\n      card.style.webkitPerspective = '1000px';\n    });\n    setupLenis();\n    updateCardTransforms();\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      if (lenisRef.current) {\n        lenisRef.current.destroy();\n      }\n      stackCompletedRef.current = false;\n      cardsRef.current = [];\n      transformsCache.clear();\n      isUpdatingRef.current = false;\n    };\n  }, [itemDistance, itemScale, itemStackDistance, stackPosition, scaleEndPosition, baseScale, scaleDuration, rotationAmount, blurAmount, useWindowScroll, onStackComplete, setupLenis, updateCardTransforms]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `scroll-stack-scroller ${className}`.trim(),\n    ref: scrollerRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scroll-stack-inner\",\n      children: [React.Children.map(children, (child, i) => {\n        var _child$props$itemClas;\n        // If child is a ScrollStackItem (has scroll-stack-card class), render as-is for scroll effect\n        if (child && child.props && ((_child$props$itemClas = child.props.itemClassName) !== null && _child$props$itemClas !== void 0 && _child$props$itemClas.includes('scroll-stack-card') || child.props.className && child.props.className.includes('scroll-stack-card'))) {\n          return child;\n        }\n        // Otherwise, wrap in PillMenuItem for pill style\n        return /*#__PURE__*/_jsxDEV(PillMenuItem, {\n          ...(child.props || {}),\n          children: child\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 18\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scroll-stack-end\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 5\n  }, this);\n};\n_s(ScrollStack, \"JPnOymhlRlLUOYPgB5KVKmiOzLU=\");\n_c3 = ScrollStack;\nexport default ScrollStack;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"PillMenuItem\");\n$RefreshReg$(_c2, \"ScrollStackItem\");\n$RefreshReg$(_c3, \"ScrollStack\");","map":{"version":3,"names":["React","useRef","useLayoutEffect","useCallback","Lenis","jsxDEV","_jsxDEV","PillMenuItem","label","active","onClick","style","children","props","href","className","color","position","minWidth","margin","display","alignItems","justifyContent","padding","fontWeight","fontSize","borderRadius","boxSizing","textTransform","letterSpacing","whiteSpace","cursor","overflow","transition","boxShadow","e","preventDefault","left","bottom","background","width","height","transform","opacity","fileName","_jsxFileName","lineNumber","columnNumber","_c","ScrollStackItem","itemClassName","trim","_c2","ScrollStack","itemDistance","itemScale","itemStackDistance","stackPosition","scaleEndPosition","baseScale","scaleDuration","rotationAmount","blurAmount","useWindowScroll","onStackComplete","_s","scrollerRef","stackCompletedRef","animationFrameRef","lenisRef","cardsRef","lastTransformsRef","Map","isUpdatingRef","calculateProgress","scrollTop","start","end","parsePercentage","value","containerHeight","includes","parseFloat","getScrollData","window","scrollY","innerHeight","scrollContainer","document","documentElement","scroller","current","clientHeight","getElementOffset","element","rect","getBoundingClientRect","top","offsetTop","updateCardTransforms","_scrollerRef$current","length","stackPositionPx","scaleEndPositionPx","endElement","querySelector","endElementTop","forEach","card","i","cardTop","triggerStart","triggerEnd","pinStart","pinEnd","scaleProgress","targetScale","scale","rotation","blur","topCardIndex","j","jCardTop","jTriggerStart","depthInStack","Math","max","translateY","isPinned","newTransform","round","lastTransform","get","hasChanged","abs","filter","set","isInView","handleScroll","setupLenis","lenis","duration","easing","t","min","pow","smoothWheel","touchMultiplier","infinite","wheelMultiplier","lerp","syncTouch","syncTouchLerp","on","raf","time","requestAnimationFrame","wrapper","content","gestureOrientationHandler","normalizeWheel","touchInertiaMultiplier","touchInertia","cards","Array","from","querySelectorAll","transformsCache","marginBottom","willChange","transformOrigin","backfaceVisibility","webkitTransform","perspective","webkitPerspective","cancelAnimationFrame","destroy","clear","ref","Children","map","child","_child$props$itemClas","_c3","$RefreshReg$"],"sources":["C:/Users/akmor/OneDrive/Projects/website/src/components/ScrollStack.js"],"sourcesContent":["\r\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\r\nimport Lenis from 'lenis';\r\nimport './ScrollStack.css';\r\n\r\n// PillNav-style menu item for dropdowns and lists\r\nfunction PillMenuItem({ label, active = false, onClick, style = {}, children, ...props }) {\r\n  return (\r\n    <a\r\n      href=\"#\"\r\n      className={`pill${active ? ' is-active' : ''}`}\r\n      style={{\r\n        color: 'var(--pill-text)',\r\n        position: 'relative',\r\n        minWidth: 120,\r\n        margin: '6px 0',\r\n        display: 'inline-flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '12px 24px',\r\n        fontWeight: 600,\r\n        fontSize: 16,\r\n        borderRadius: '9999px',\r\n        boxSizing: 'border-box',\r\n        textTransform: 'uppercase',\r\n        letterSpacing: '0.2px',\r\n        whiteSpace: 'nowrap',\r\n        cursor: 'pointer',\r\n        overflow: 'hidden',\r\n        transition: 'box-shadow 0.2s, transform 0.2s',\r\n        boxShadow: '0 2px 8px rgba(0,0,0,0.04)',\r\n        ...style\r\n      }}\r\n      aria-label={label}\r\n      onClick={e => { e.preventDefault(); onClick?.(); }}\r\n      {...props}\r\n    >\r\n      <span\r\n        className=\"hover-circle\"\r\n        aria-hidden=\"true\"\r\n        style={{\r\n          position: 'absolute',\r\n          left: '50%',\r\n          bottom: 0,\r\n          borderRadius: '50%',\r\n          background: 'var(--base, #000)',\r\n          width: '120%',\r\n          height: '200%',\r\n          transform: 'translateX(-50%)',\r\n          opacity: 0,\r\n          transition: 'opacity 0.3s'\r\n        }}\r\n      />\r\n      <span className=\"label-stack\">\r\n        <span className=\"pill-label\">{label || children}</span>\r\n        <span className=\"pill-label-hover\" aria-hidden=\"true\">{label || children}</span>\r\n      </span>\r\n    </a>\r\n  );\r\n}\r\n\r\nexport { PillMenuItem };\r\n\r\nexport const ScrollStackItem = ({ children, itemClassName = '' }) => (\r\n  <div className={`scroll-stack-card ${itemClassName}`.trim()}>{children}</div>\r\n);\r\n\r\nconst ScrollStack = ({\r\n  children,\r\n  className = '',\r\n  itemDistance = 100,\r\n  itemScale = 0,\r\n  itemStackDistance = 0,\r\n  stackPosition = '0%',\r\n  scaleEndPosition = '0%',\r\n  baseScale = 1,\r\n  scaleDuration = 0,\r\n  rotationAmount = 0,\r\n  blurAmount = 0,\r\n  useWindowScroll = false,\r\n  onStackComplete\r\n}) => {\r\n  const scrollerRef = useRef(null);\r\n  const stackCompletedRef = useRef(false);\r\n  const animationFrameRef = useRef(null);\r\n  const lenisRef = useRef(null);\r\n  const cardsRef = useRef([]);\r\n  const lastTransformsRef = useRef(new Map());\r\n  const isUpdatingRef = useRef(false);\r\n\r\n  const calculateProgress = useCallback((scrollTop, start, end) => {\r\n    if (scrollTop < start) return 0;\r\n    if (scrollTop > end) return 1;\r\n    return (scrollTop - start) / (end - start);\r\n  }, []);\r\n\r\n  const parsePercentage = useCallback((value, containerHeight) => {\r\n    if (typeof value === 'string' && value.includes('%')) {\r\n      return (parseFloat(value) / 100) * containerHeight;\r\n    }\r\n    return parseFloat(value);\r\n  }, []);\r\n\r\n  const getScrollData = useCallback(() => {\r\n    if (useWindowScroll) {\r\n      return {\r\n        scrollTop: window.scrollY,\r\n        containerHeight: window.innerHeight,\r\n        scrollContainer: document.documentElement\r\n      };\r\n    } else {\r\n      const scroller = scrollerRef.current;\r\n      return {\r\n        scrollTop: scroller.scrollTop,\r\n        containerHeight: scroller.clientHeight,\r\n        scrollContainer: scroller\r\n      };\r\n    }\r\n  }, [useWindowScroll]);\r\n\r\n  const getElementOffset = useCallback(\r\n    element => {\r\n      if (useWindowScroll) {\r\n        const rect = element.getBoundingClientRect();\r\n        return rect.top + window.scrollY;\r\n      } else {\r\n        return element.offsetTop;\r\n      }\r\n    },\r\n    [useWindowScroll]\r\n  );\r\n\r\n  const updateCardTransforms = useCallback(() => {\r\n    if (!cardsRef.current.length || isUpdatingRef.current) return;\r\n\r\n    isUpdatingRef.current = true;\r\n\r\n    const { scrollTop, containerHeight } = getScrollData();\r\n    const stackPositionPx = parsePercentage(stackPosition, containerHeight);\r\n    const scaleEndPositionPx = parsePercentage(scaleEndPosition, containerHeight);\r\n\r\n    const endElement = useWindowScroll\r\n      ? document.querySelector('.scroll-stack-end')\r\n      : scrollerRef.current?.querySelector('.scroll-stack-end');\r\n\r\n    const endElementTop = endElement ? getElementOffset(endElement) : 0;\r\n\r\n    cardsRef.current.forEach((card, i) => {\r\n      if (!card) return;\r\n\r\n      const cardTop = getElementOffset(card);\r\n      const triggerStart = cardTop - stackPositionPx - itemStackDistance * i;\r\n      const triggerEnd = cardTop - scaleEndPositionPx;\r\n      const pinStart = cardTop - stackPositionPx - itemStackDistance * i;\r\n      const pinEnd = endElementTop - containerHeight / 2;\r\n\r\n      const scaleProgress = calculateProgress(scrollTop, triggerStart, triggerEnd);\r\n      const targetScale = baseScale + i * itemScale;\r\n      const scale = 1 - scaleProgress * (1 - targetScale);\r\n      const rotation = rotationAmount ? i * rotationAmount * scaleProgress : 0;\r\n\r\n      let blur = 0;\r\n      if (blurAmount) {\r\n        let topCardIndex = 0;\r\n        for (let j = 0; j < cardsRef.current.length; j++) {\r\n          const jCardTop = getElementOffset(cardsRef.current[j]);\r\n          const jTriggerStart = jCardTop - stackPositionPx - itemStackDistance * j;\r\n          if (scrollTop >= jTriggerStart) {\r\n            topCardIndex = j;\r\n          }\r\n        }\r\n\r\n        if (i < topCardIndex) {\r\n          const depthInStack = topCardIndex - i;\r\n          blur = Math.max(0, depthInStack * blurAmount);\r\n        }\r\n      }\r\n\r\n      let translateY = 0;\r\n      const isPinned = scrollTop >= pinStart && scrollTop <= pinEnd;\r\n\r\n      if (isPinned) {\r\n        translateY = scrollTop - cardTop + stackPositionPx + itemStackDistance * i;\r\n      } else if (scrollTop > pinEnd) {\r\n        translateY = pinEnd - cardTop + stackPositionPx + itemStackDistance * i;\r\n      }\r\n\r\n      const newTransform = {\r\n        translateY: Math.round(translateY * 100) / 100,\r\n        scale: Math.round(scale * 1000) / 1000,\r\n        rotation: Math.round(rotation * 100) / 100,\r\n        blur: Math.round(blur * 100) / 100\r\n      };\r\n\r\n      const lastTransform = lastTransformsRef.current.get(i);\r\n      const hasChanged =\r\n        !lastTransform ||\r\n        Math.abs(lastTransform.translateY - newTransform.translateY) > 0.1 ||\r\n        Math.abs(lastTransform.scale - newTransform.scale) > 0.001 ||\r\n        Math.abs(lastTransform.rotation - newTransform.rotation) > 0.1 ||\r\n        Math.abs(lastTransform.blur - newTransform.blur) > 0.1;\r\n\r\n      if (hasChanged) {\r\n        const transform = `translate3d(0, ${newTransform.translateY}px, 0) scale(${newTransform.scale}) rotate(${newTransform.rotation}deg)`;\r\n        const filter = newTransform.blur > 0 ? `blur(${newTransform.blur}px)` : '';\r\n\r\n        card.style.transform = transform;\r\n        card.style.filter = filter;\r\n\r\n        lastTransformsRef.current.set(i, newTransform);\r\n      }\r\n\r\n      if (i === cardsRef.current.length - 1) {\r\n        const isInView = scrollTop >= pinStart && scrollTop <= pinEnd;\r\n        if (isInView && !stackCompletedRef.current) {\r\n          stackCompletedRef.current = true;\r\n          onStackComplete?.();\r\n        } else if (!isInView && stackCompletedRef.current) {\r\n          stackCompletedRef.current = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    isUpdatingRef.current = false;\r\n  }, [\r\n    itemScale,\r\n    itemStackDistance,\r\n    stackPosition,\r\n    scaleEndPosition,\r\n    baseScale,\r\n    rotationAmount,\r\n    blurAmount,\r\n    useWindowScroll,\r\n    onStackComplete,\r\n    calculateProgress,\r\n    parsePercentage,\r\n    getScrollData,\r\n    getElementOffset\r\n  ]);\r\n\r\n  const handleScroll = useCallback(() => {\r\n    updateCardTransforms();\r\n  }, [updateCardTransforms]);\r\n\r\n  const setupLenis = useCallback(() => {\r\n    if (useWindowScroll) {\r\n      const lenis = new Lenis({\r\n        duration: 1.2,\r\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\r\n        smoothWheel: true,\r\n        touchMultiplier: 2,\r\n        infinite: false,\r\n        wheelMultiplier: 0.8,\r\n        lerp: 0.1,\r\n        syncTouch: true,\r\n        syncTouchLerp: 0.075\r\n      });\r\n\r\n      lenis.on('scroll', handleScroll);\r\n\r\n      const raf = time => {\r\n        lenis.raf(time);\r\n        animationFrameRef.current = requestAnimationFrame(raf);\r\n      };\r\n      animationFrameRef.current = requestAnimationFrame(raf);\r\n\r\n      lenisRef.current = lenis;\r\n      return lenis;\r\n    } else {\r\n      const scroller = scrollerRef.current;\r\n      if (!scroller) return;\r\n\r\n      const lenis = new Lenis({\r\n        wrapper: scroller,\r\n        content: scroller.querySelector('.scroll-stack-inner'),\r\n        duration: 1.2,\r\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\r\n        smoothWheel: true,\r\n        touchMultiplier: 2,\r\n        infinite: false,\r\n        gestureOrientationHandler: true,\r\n        normalizeWheel: true,\r\n        wheelMultiplier: 1,\r\n        touchInertiaMultiplier: 35,\r\n        lerp: 0.1,\r\n        syncTouch: true,\r\n        syncTouchLerp: 0.075,\r\n        touchInertia: 0.6\r\n      });\r\n\r\n      lenis.on('scroll', handleScroll);\r\n\r\n      const raf = time => {\r\n        lenis.raf(time);\r\n        animationFrameRef.current = requestAnimationFrame(raf);\r\n      };\r\n      animationFrameRef.current = requestAnimationFrame(raf);\r\n\r\n      lenisRef.current = lenis;\r\n      return lenis;\r\n    }\r\n  }, [handleScroll, useWindowScroll]);\r\n\r\n  useLayoutEffect(() => {\r\n    const scroller = scrollerRef.current;\r\n    if (!scroller) return;\r\n\r\n    const cards = Array.from(\r\n      useWindowScroll\r\n        ? document.querySelectorAll('.scroll-stack-card')\r\n        : scroller.querySelectorAll('.scroll-stack-card')\r\n    );\r\n\r\n    cardsRef.current = cards;\r\n    const transformsCache = lastTransformsRef.current;\r\n\r\n    cards.forEach((card, i) => {\r\n      if (i < cards.length - 1) {\r\n        card.style.marginBottom = `${itemDistance}px`;\r\n      }\r\n      card.style.willChange = 'transform, filter';\r\n      card.style.transformOrigin = 'top center';\r\n      card.style.backfaceVisibility = 'hidden';\r\n      card.style.transform = 'translateZ(0)';\r\n      card.style.webkitTransform = 'translateZ(0)';\r\n      card.style.perspective = '1000px';\r\n      card.style.webkitPerspective = '1000px';\r\n    });\r\n\r\n    setupLenis();\r\n\r\n    updateCardTransforms();\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n      if (lenisRef.current) {\r\n        lenisRef.current.destroy();\r\n      }\r\n      stackCompletedRef.current = false;\r\n      cardsRef.current = [];\r\n      transformsCache.clear();\r\n      isUpdatingRef.current = false;\r\n    };\r\n  }, [\r\n    itemDistance,\r\n    itemScale,\r\n    itemStackDistance,\r\n    stackPosition,\r\n    scaleEndPosition,\r\n    baseScale,\r\n    scaleDuration,\r\n    rotationAmount,\r\n    blurAmount,\r\n    useWindowScroll,\r\n    onStackComplete,\r\n    setupLenis,\r\n    updateCardTransforms\r\n  ]);\r\n\r\n\r\n\r\n  return (\r\n    <div className={`scroll-stack-scroller ${className}`.trim()} ref={scrollerRef}>\r\n      <div className=\"scroll-stack-inner\">\r\n        {React.Children.map(children, (child, i) => {\r\n          // If child is a ScrollStackItem (has scroll-stack-card class), render as-is for scroll effect\r\n          if (child && child.props && (\r\n            child.props.itemClassName?.includes('scroll-stack-card') ||\r\n            (child.props.className && child.props.className.includes('scroll-stack-card'))\r\n          )) {\r\n            return child;\r\n          }\r\n          // Otherwise, wrap in PillMenuItem for pill style\r\n          return <PillMenuItem key={i} {...(child.props || {})}>{child}</PillMenuItem>;\r\n        })}\r\n        <div className=\"scroll-stack-end\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollStack;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}