{"ast":null,"code":"import React,{useRef,useLayoutEffect,useCallback}from'react';import Lenis from'lenis';import'./ScrollStack.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ScrollStackItem=_ref=>{let{children,itemClassName=''}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"scroll-stack-card \".concat(itemClassName).trim(),children:children});};const ScrollStack=_ref2=>{let{children,className='',itemDistance=100,itemScale=0.03,itemStackDistance=30,stackPosition='20%',scaleEndPosition='10%',baseScale=0.85,scaleDuration=0.5,rotationAmount=0,blurAmount=0,useWindowScroll=false,onStackComplete}=_ref2;const scrollerRef=useRef(null);const stackCompletedRef=useRef(false);const animationFrameRef=useRef(null);const lenisRef=useRef(null);const cardsRef=useRef([]);const lastTransformsRef=useRef(new Map());const isUpdatingRef=useRef(false);const calculateProgress=useCallback((scrollTop,start,end)=>{if(scrollTop<start)return 0;if(scrollTop>end)return 1;return(scrollTop-start)/(end-start);},[]);const parsePercentage=useCallback((value,containerHeight)=>{if(typeof value==='string'&&value.includes('%')){return parseFloat(value)/100*containerHeight;}return parseFloat(value);},[]);const getScrollData=useCallback(()=>{if(useWindowScroll){return{scrollTop:window.scrollY,containerHeight:window.innerHeight,scrollContainer:document.documentElement};}else{const scroller=scrollerRef.current;return{scrollTop:scroller.scrollTop,containerHeight:scroller.clientHeight,scrollContainer:scroller};}},[useWindowScroll]);const getElementOffset=useCallback(element=>{if(useWindowScroll){const rect=element.getBoundingClientRect();return rect.top+window.scrollY;}else{return element.offsetTop;}},[useWindowScroll]);const updateCardTransforms=useCallback(()=>{var _scrollerRef$current;if(!cardsRef.current.length||isUpdatingRef.current)return;isUpdatingRef.current=true;const{scrollTop,containerHeight,scrollContainer}=getScrollData();const stackPositionPx=parsePercentage(stackPosition,containerHeight);const scaleEndPositionPx=parsePercentage(scaleEndPosition,containerHeight);const endElement=useWindowScroll?document.querySelector('.scroll-stack-end'):(_scrollerRef$current=scrollerRef.current)===null||_scrollerRef$current===void 0?void 0:_scrollerRef$current.querySelector('.scroll-stack-end');const endElementTop=endElement?getElementOffset(endElement):0;cardsRef.current.forEach((card,i)=>{if(!card)return;const cardTop=getElementOffset(card);const triggerStart=cardTop-stackPositionPx-itemStackDistance*i;const triggerEnd=cardTop-scaleEndPositionPx;const pinStart=cardTop-stackPositionPx-itemStackDistance*i;const pinEnd=endElementTop-containerHeight/2;const scaleProgress=calculateProgress(scrollTop,triggerStart,triggerEnd);const targetScale=baseScale+i*itemScale;const scale=1-scaleProgress*(1-targetScale);const rotation=rotationAmount?i*rotationAmount*scaleProgress:0;let blur=0;if(blurAmount){let topCardIndex=0;for(let j=0;j<cardsRef.current.length;j++){const jCardTop=getElementOffset(cardsRef.current[j]);const jTriggerStart=jCardTop-stackPositionPx-itemStackDistance*j;if(scrollTop>=jTriggerStart){topCardIndex=j;}}if(i<topCardIndex){const depthInStack=topCardIndex-i;blur=Math.max(0,depthInStack*blurAmount);}}let translateY=0;const isPinned=scrollTop>=pinStart&&scrollTop<=pinEnd;if(isPinned){translateY=scrollTop-cardTop+stackPositionPx+itemStackDistance*i;}else if(scrollTop>pinEnd){translateY=pinEnd-cardTop+stackPositionPx+itemStackDistance*i;}const newTransform={translateY:Math.round(translateY*100)/100,scale:Math.round(scale*1000)/1000,rotation:Math.round(rotation*100)/100,blur:Math.round(blur*100)/100};const lastTransform=lastTransformsRef.current.get(i);const hasChanged=!lastTransform||Math.abs(lastTransform.translateY-newTransform.translateY)>0.1||Math.abs(lastTransform.scale-newTransform.scale)>0.001||Math.abs(lastTransform.rotation-newTransform.rotation)>0.1||Math.abs(lastTransform.blur-newTransform.blur)>0.1;if(hasChanged){const transform=\"translate3d(0, \".concat(newTransform.translateY,\"px, 0) scale(\").concat(newTransform.scale,\") rotate(\").concat(newTransform.rotation,\"deg)\");const filter=newTransform.blur>0?\"blur(\".concat(newTransform.blur,\"px)\"):'';card.style.transform=transform;card.style.filter=filter;lastTransformsRef.current.set(i,newTransform);}if(i===cardsRef.current.length-1){const isInView=scrollTop>=pinStart&&scrollTop<=pinEnd;if(isInView&&!stackCompletedRef.current){stackCompletedRef.current=true;onStackComplete===null||onStackComplete===void 0?void 0:onStackComplete();}else if(!isInView&&stackCompletedRef.current){stackCompletedRef.current=false;}}});isUpdatingRef.current=false;},[itemScale,itemStackDistance,stackPosition,scaleEndPosition,baseScale,rotationAmount,blurAmount,useWindowScroll,onStackComplete,calculateProgress,parsePercentage,getScrollData,getElementOffset]);const handleScroll=useCallback(()=>{updateCardTransforms();},[updateCardTransforms]);const setupLenis=useCallback(()=>{if(useWindowScroll){const lenis=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),smoothWheel:true,touchMultiplier:2,infinite:false,wheelMultiplier:1,lerp:0.1,syncTouch:true,syncTouchLerp:0.075});lenis.on('scroll',handleScroll);const raf=time=>{lenis.raf(time);animationFrameRef.current=requestAnimationFrame(raf);};animationFrameRef.current=requestAnimationFrame(raf);lenisRef.current=lenis;return lenis;}else{const scroller=scrollerRef.current;if(!scroller)return;const lenis=new Lenis({wrapper:scroller,content:scroller.querySelector('.scroll-stack-inner'),duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),smoothWheel:true,touchMultiplier:2,infinite:false,gestureOrientationHandler:true,normalizeWheel:true,wheelMultiplier:1,touchInertiaMultiplier:35,lerp:0.1,syncTouch:true,syncTouchLerp:0.075,touchInertia:0.6});lenis.on('scroll',handleScroll);const raf=time=>{lenis.raf(time);animationFrameRef.current=requestAnimationFrame(raf);};animationFrameRef.current=requestAnimationFrame(raf);lenisRef.current=lenis;return lenis;}},[handleScroll,useWindowScroll]);useLayoutEffect(()=>{const scroller=scrollerRef.current;if(!scroller)return;const cards=Array.from(useWindowScroll?document.querySelectorAll('.scroll-stack-card'):scroller.querySelectorAll('.scroll-stack-card'));cardsRef.current=cards;const transformsCache=lastTransformsRef.current;cards.forEach((card,i)=>{if(i<cards.length-1){card.style.marginBottom=\"\".concat(itemDistance,\"px\");}card.style.willChange='transform, filter';card.style.transformOrigin='top center';card.style.backfaceVisibility='hidden';card.style.transform='translateZ(0)';card.style.webkitTransform='translateZ(0)';card.style.perspective='1000px';card.style.webkitPerspective='1000px';});setupLenis();updateCardTransforms();return()=>{if(animationFrameRef.current){cancelAnimationFrame(animationFrameRef.current);}if(lenisRef.current){lenisRef.current.destroy();}stackCompletedRef.current=false;cardsRef.current=[];transformsCache.clear();isUpdatingRef.current=false;};},[itemDistance,itemScale,itemStackDistance,stackPosition,scaleEndPosition,baseScale,scaleDuration,rotationAmount,blurAmount,useWindowScroll,onStackComplete,setupLenis,updateCardTransforms]);return/*#__PURE__*/_jsx(\"div\",{className:\"scroll-stack-scroller \".concat(className).trim(),ref:scrollerRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"scroll-stack-inner\",children:[children,/*#__PURE__*/_jsx(\"div\",{className:\"scroll-stack-end\"})]})});};export default ScrollStack;","map":{"version":3,"names":["React","useRef","useLayoutEffect","useCallback","Lenis","jsx","_jsx","jsxs","_jsxs","ScrollStackItem","_ref","children","itemClassName","className","concat","trim","ScrollStack","_ref2","itemDistance","itemScale","itemStackDistance","stackPosition","scaleEndPosition","baseScale","scaleDuration","rotationAmount","blurAmount","useWindowScroll","onStackComplete","scrollerRef","stackCompletedRef","animationFrameRef","lenisRef","cardsRef","lastTransformsRef","Map","isUpdatingRef","calculateProgress","scrollTop","start","end","parsePercentage","value","containerHeight","includes","parseFloat","getScrollData","window","scrollY","innerHeight","scrollContainer","document","documentElement","scroller","current","clientHeight","getElementOffset","element","rect","getBoundingClientRect","top","offsetTop","updateCardTransforms","_scrollerRef$current","length","stackPositionPx","scaleEndPositionPx","endElement","querySelector","endElementTop","forEach","card","i","cardTop","triggerStart","triggerEnd","pinStart","pinEnd","scaleProgress","targetScale","scale","rotation","blur","topCardIndex","j","jCardTop","jTriggerStart","depthInStack","Math","max","translateY","isPinned","newTransform","round","lastTransform","get","hasChanged","abs","transform","filter","style","set","isInView","handleScroll","setupLenis","lenis","duration","easing","t","min","pow","smoothWheel","touchMultiplier","infinite","wheelMultiplier","lerp","syncTouch","syncTouchLerp","on","raf","time","requestAnimationFrame","wrapper","content","gestureOrientationHandler","normalizeWheel","touchInertiaMultiplier","touchInertia","cards","Array","from","querySelectorAll","transformsCache","marginBottom","willChange","transformOrigin","backfaceVisibility","webkitTransform","perspective","webkitPerspective","cancelAnimationFrame","destroy","clear","ref"],"sources":["C:/Users/akmor/OneDrive/website/src/components/ScrollStack.js"],"sourcesContent":["import React, { useRef, useLayoutEffect, useCallback } from 'react';\r\nimport Lenis from 'lenis';\r\nimport './ScrollStack.css';\r\n\r\nexport const ScrollStackItem = ({ children, itemClassName = '' }) => (\r\n  <div className={`scroll-stack-card ${itemClassName}`.trim()}>{children}</div>\r\n);\r\n\r\nconst ScrollStack = ({\r\n  children,\r\n  className = '',\r\n  itemDistance = 100,\r\n  itemScale = 0.03,\r\n  itemStackDistance = 30,\r\n  stackPosition = '20%',\r\n  scaleEndPosition = '10%',\r\n  baseScale = 0.85,\r\n  scaleDuration = 0.5,\r\n  rotationAmount = 0,\r\n  blurAmount = 0,\r\n  useWindowScroll = false,\r\n  onStackComplete\r\n}) => {\r\n  const scrollerRef = useRef(null);\r\n  const stackCompletedRef = useRef(false);\r\n  const animationFrameRef = useRef(null);\r\n  const lenisRef = useRef(null);\r\n  const cardsRef = useRef([]);\r\n  const lastTransformsRef = useRef(new Map());\r\n  const isUpdatingRef = useRef(false);\r\n\r\n  const calculateProgress = useCallback((scrollTop, start, end) => {\r\n    if (scrollTop < start) return 0;\r\n    if (scrollTop > end) return 1;\r\n    return (scrollTop - start) / (end - start);\r\n  }, []);\r\n\r\n  const parsePercentage = useCallback((value, containerHeight) => {\r\n    if (typeof value === 'string' && value.includes('%')) {\r\n      return (parseFloat(value) / 100) * containerHeight;\r\n    }\r\n    return parseFloat(value);\r\n  }, []);\r\n\r\n  const getScrollData = useCallback(() => {\r\n    if (useWindowScroll) {\r\n      return {\r\n        scrollTop: window.scrollY,\r\n        containerHeight: window.innerHeight,\r\n        scrollContainer: document.documentElement\r\n      };\r\n    } else {\r\n      const scroller = scrollerRef.current;\r\n      return {\r\n        scrollTop: scroller.scrollTop,\r\n        containerHeight: scroller.clientHeight,\r\n        scrollContainer: scroller\r\n      };\r\n    }\r\n  }, [useWindowScroll]);\r\n\r\n  const getElementOffset = useCallback(\r\n    element => {\r\n      if (useWindowScroll) {\r\n        const rect = element.getBoundingClientRect();\r\n        return rect.top + window.scrollY;\r\n      } else {\r\n        return element.offsetTop;\r\n      }\r\n    },\r\n    [useWindowScroll]\r\n  );\r\n\r\n  const updateCardTransforms = useCallback(() => {\r\n    if (!cardsRef.current.length || isUpdatingRef.current) return;\r\n\r\n    isUpdatingRef.current = true;\r\n\r\n    const { scrollTop, containerHeight, scrollContainer } = getScrollData();\r\n    const stackPositionPx = parsePercentage(stackPosition, containerHeight);\r\n    const scaleEndPositionPx = parsePercentage(scaleEndPosition, containerHeight);\r\n\r\n    const endElement = useWindowScroll\r\n      ? document.querySelector('.scroll-stack-end')\r\n      : scrollerRef.current?.querySelector('.scroll-stack-end');\r\n\r\n    const endElementTop = endElement ? getElementOffset(endElement) : 0;\r\n\r\n    cardsRef.current.forEach((card, i) => {\r\n      if (!card) return;\r\n\r\n      const cardTop = getElementOffset(card);\r\n      const triggerStart = cardTop - stackPositionPx - itemStackDistance * i;\r\n      const triggerEnd = cardTop - scaleEndPositionPx;\r\n      const pinStart = cardTop - stackPositionPx - itemStackDistance * i;\r\n      const pinEnd = endElementTop - containerHeight / 2;\r\n\r\n      const scaleProgress = calculateProgress(scrollTop, triggerStart, triggerEnd);\r\n      const targetScale = baseScale + i * itemScale;\r\n      const scale = 1 - scaleProgress * (1 - targetScale);\r\n      const rotation = rotationAmount ? i * rotationAmount * scaleProgress : 0;\r\n\r\n      let blur = 0;\r\n      if (blurAmount) {\r\n        let topCardIndex = 0;\r\n        for (let j = 0; j < cardsRef.current.length; j++) {\r\n          const jCardTop = getElementOffset(cardsRef.current[j]);\r\n          const jTriggerStart = jCardTop - stackPositionPx - itemStackDistance * j;\r\n          if (scrollTop >= jTriggerStart) {\r\n            topCardIndex = j;\r\n          }\r\n        }\r\n\r\n        if (i < topCardIndex) {\r\n          const depthInStack = topCardIndex - i;\r\n          blur = Math.max(0, depthInStack * blurAmount);\r\n        }\r\n      }\r\n\r\n      let translateY = 0;\r\n      const isPinned = scrollTop >= pinStart && scrollTop <= pinEnd;\r\n\r\n      if (isPinned) {\r\n        translateY = scrollTop - cardTop + stackPositionPx + itemStackDistance * i;\r\n      } else if (scrollTop > pinEnd) {\r\n        translateY = pinEnd - cardTop + stackPositionPx + itemStackDistance * i;\r\n      }\r\n\r\n      const newTransform = {\r\n        translateY: Math.round(translateY * 100) / 100,\r\n        scale: Math.round(scale * 1000) / 1000,\r\n        rotation: Math.round(rotation * 100) / 100,\r\n        blur: Math.round(blur * 100) / 100\r\n      };\r\n\r\n      const lastTransform = lastTransformsRef.current.get(i);\r\n      const hasChanged =\r\n        !lastTransform ||\r\n        Math.abs(lastTransform.translateY - newTransform.translateY) > 0.1 ||\r\n        Math.abs(lastTransform.scale - newTransform.scale) > 0.001 ||\r\n        Math.abs(lastTransform.rotation - newTransform.rotation) > 0.1 ||\r\n        Math.abs(lastTransform.blur - newTransform.blur) > 0.1;\r\n\r\n      if (hasChanged) {\r\n        const transform = `translate3d(0, ${newTransform.translateY}px, 0) scale(${newTransform.scale}) rotate(${newTransform.rotation}deg)`;\r\n        const filter = newTransform.blur > 0 ? `blur(${newTransform.blur}px)` : '';\r\n\r\n        card.style.transform = transform;\r\n        card.style.filter = filter;\r\n\r\n        lastTransformsRef.current.set(i, newTransform);\r\n      }\r\n\r\n      if (i === cardsRef.current.length - 1) {\r\n        const isInView = scrollTop >= pinStart && scrollTop <= pinEnd;\r\n        if (isInView && !stackCompletedRef.current) {\r\n          stackCompletedRef.current = true;\r\n          onStackComplete?.();\r\n        } else if (!isInView && stackCompletedRef.current) {\r\n          stackCompletedRef.current = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    isUpdatingRef.current = false;\r\n  }, [\r\n    itemScale,\r\n    itemStackDistance,\r\n    stackPosition,\r\n    scaleEndPosition,\r\n    baseScale,\r\n    rotationAmount,\r\n    blurAmount,\r\n    useWindowScroll,\r\n    onStackComplete,\r\n    calculateProgress,\r\n    parsePercentage,\r\n    getScrollData,\r\n    getElementOffset\r\n  ]);\r\n\r\n  const handleScroll = useCallback(() => {\r\n    updateCardTransforms();\r\n  }, [updateCardTransforms]);\r\n\r\n  const setupLenis = useCallback(() => {\r\n    if (useWindowScroll) {\r\n      const lenis = new Lenis({\r\n        duration: 1.2,\r\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\r\n        smoothWheel: true,\r\n        touchMultiplier: 2,\r\n        infinite: false,\r\n        wheelMultiplier: 1,\r\n        lerp: 0.1,\r\n        syncTouch: true,\r\n        syncTouchLerp: 0.075\r\n      });\r\n\r\n      lenis.on('scroll', handleScroll);\r\n\r\n      const raf = time => {\r\n        lenis.raf(time);\r\n        animationFrameRef.current = requestAnimationFrame(raf);\r\n      };\r\n      animationFrameRef.current = requestAnimationFrame(raf);\r\n\r\n      lenisRef.current = lenis;\r\n      return lenis;\r\n    } else {\r\n      const scroller = scrollerRef.current;\r\n      if (!scroller) return;\r\n\r\n      const lenis = new Lenis({\r\n        wrapper: scroller,\r\n        content: scroller.querySelector('.scroll-stack-inner'),\r\n        duration: 1.2,\r\n        easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\r\n        smoothWheel: true,\r\n        touchMultiplier: 2,\r\n        infinite: false,\r\n        gestureOrientationHandler: true,\r\n        normalizeWheel: true,\r\n        wheelMultiplier: 1,\r\n        touchInertiaMultiplier: 35,\r\n        lerp: 0.1,\r\n        syncTouch: true,\r\n        syncTouchLerp: 0.075,\r\n        touchInertia: 0.6\r\n      });\r\n\r\n      lenis.on('scroll', handleScroll);\r\n\r\n      const raf = time => {\r\n        lenis.raf(time);\r\n        animationFrameRef.current = requestAnimationFrame(raf);\r\n      };\r\n      animationFrameRef.current = requestAnimationFrame(raf);\r\n\r\n      lenisRef.current = lenis;\r\n      return lenis;\r\n    }\r\n  }, [handleScroll, useWindowScroll]);\r\n\r\n  useLayoutEffect(() => {\r\n    const scroller = scrollerRef.current;\r\n    if (!scroller) return;\r\n\r\n    const cards = Array.from(\r\n      useWindowScroll\r\n        ? document.querySelectorAll('.scroll-stack-card')\r\n        : scroller.querySelectorAll('.scroll-stack-card')\r\n    );\r\n\r\n    cardsRef.current = cards;\r\n    const transformsCache = lastTransformsRef.current;\r\n\r\n    cards.forEach((card, i) => {\r\n      if (i < cards.length - 1) {\r\n        card.style.marginBottom = `${itemDistance}px`;\r\n      }\r\n      card.style.willChange = 'transform, filter';\r\n      card.style.transformOrigin = 'top center';\r\n      card.style.backfaceVisibility = 'hidden';\r\n      card.style.transform = 'translateZ(0)';\r\n      card.style.webkitTransform = 'translateZ(0)';\r\n      card.style.perspective = '1000px';\r\n      card.style.webkitPerspective = '1000px';\r\n    });\r\n\r\n    setupLenis();\r\n\r\n    updateCardTransforms();\r\n\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n      if (lenisRef.current) {\r\n        lenisRef.current.destroy();\r\n      }\r\n      stackCompletedRef.current = false;\r\n      cardsRef.current = [];\r\n      transformsCache.clear();\r\n      isUpdatingRef.current = false;\r\n    };\r\n  }, [\r\n    itemDistance,\r\n    itemScale,\r\n    itemStackDistance,\r\n    stackPosition,\r\n    scaleEndPosition,\r\n    baseScale,\r\n    scaleDuration,\r\n    rotationAmount,\r\n    blurAmount,\r\n    useWindowScroll,\r\n    onStackComplete,\r\n    setupLenis,\r\n    updateCardTransforms\r\n  ]);\r\n\r\n  return (\r\n    <div className={`scroll-stack-scroller ${className}`.trim()} ref={scrollerRef}>\r\n      <div className=\"scroll-stack-inner\">\r\n        {children}\r\n        {/* Spacer so the last pin can release cleanly */}\r\n        <div className=\"scroll-stack-end\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollStack;\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}