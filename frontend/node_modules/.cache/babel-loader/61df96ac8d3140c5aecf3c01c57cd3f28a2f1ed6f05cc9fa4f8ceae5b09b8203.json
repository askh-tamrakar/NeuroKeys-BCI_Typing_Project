{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\akmor\\\\OneDrive\\\\website\\\\src\\\\components\\\\ScrollStack.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useLayoutEffect, useCallback } from 'react';\nimport Lenis from 'lenis';\nimport './ScrollStack.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ScrollStackItem = ({\n  children,\n  itemClassName = ''\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `scroll-stack-card ${itemClassName}`.trim(),\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 6,\n  columnNumber: 3\n}, this);\n_c = ScrollStackItem;\nconst ScrollStack = ({\n  children,\n  className = '',\n  itemDistance = 80,\n  itemScale = 0.035,\n  itemStackDistance = 26,\n  stackPosition = '24%',\n  scaleEndPosition = '22%',\n  baseScale = 0.9,\n  rotationAmount = 10\n}) => {\n  _s();\n  const scrollerRef = useRef(null);\n  const lenisRef = useRef(null);\n  const cardsRef = useRef([]);\n  const rafRef = useRef(null);\n  const parsePct = useCallback((v, h) => typeof v === 'string' && v.includes('%') ? parseFloat(v) / 100 * h : parseFloat(v), []);\n  const update = useCallback(() => {\n    const scroller = scrollerRef.current;\n    if (!scroller) return;\n    const y = scroller.scrollTop;\n    const h = scroller.clientHeight;\n    const stackY = parsePct(stackPosition, h);\n    const endY = parsePct(scaleEndPosition, h);\n    const endEl = scroller.querySelector('.scroll-stack-end');\n    const endTop = endEl ? endEl.offsetTop : scroller.scrollHeight;\n    cardsRef.current.forEach((card, i) => {\n      const top = card.offsetTop;\n      const tStart = top - stackY - itemStackDistance * i;\n      const tEnd = top - endY;\n      const pinStart = tStart;\n      const pinEnd = endTop - h + stackY + itemStackDistance * (i + 1);\n      const p = y <= tStart ? 0 : y >= tEnd ? 1 : (y - tStart) / Math.max(1, tEnd - tStart);\n      const scale = 1 - p * (1 - (baseScale + i * itemScale));\n      const translateY = y < pinStart ? 0 : y <= pinEnd ? y - top + stackY + itemStackDistance * i : pinEnd - top + stackY + itemStackDistance * i;\n      const rot = rotationAmount ? i * rotationAmount * p : 0;\n      card.style.transform = `translate3d(0, ${translateY}px, 0) scale(${scale}) rotate(${rot}deg)`;\n    });\n  }, [itemScale, itemStackDistance, stackPosition, scaleEndPosition, baseScale, rotationAmount, parsePct]);\n  useLayoutEffect(() => {\n    const scroller = scrollerRef.current;\n    if (!scroller) return;\n    const cards = Array.from(scroller.querySelectorAll('.scroll-stack-card'));\n    cardsRef.current = cards;\n    cards.forEach((c, i) => {\n      if (i < cards.length - 1) c.style.marginBottom = `${itemDistance}px`;\n    });\n    const lenis = new Lenis({\n      wrapper: scroller,\n      content: scroller.querySelector('.scroll-stack-inner'),\n      duration: 1.08,\n      easing: t => Math.min(1, 1.001 - 2 ** (-10 * t)),\n      smoothWheel: true,\n      normalizeWheel: true,\n      wheelMultiplier: 1,\n      touchMultiplier: 1,\n      lerp: 0.09,\n      syncTouch: true,\n      syncTouchLerp: 0.09\n    });\n    lenis.on('scroll', update);\n    const raf = t => {\n      lenis.raf(t);\n      rafRef.current = requestAnimationFrame(raf);\n    };\n    rafRef.current = requestAnimationFrame(raf);\n    lenisRef.current = lenis;\n    update();\n    return () => {\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\n      if (lenisRef.current) lenisRef.current.destroy();\n    };\n  }, [itemDistance, update]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `scroll-stack-scroller ${className}`.trim(),\n    ref: scrollerRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scroll-stack-inner\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), children, /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          height: 36\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"scroll-stack-end\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(ScrollStack, \"Qa7OS5VRjrv1ZnaImYk/5nHdwu0=\");\n_c2 = ScrollStack;\nexport default ScrollStack;\nvar _c, _c2;\n$RefreshReg$(_c, \"ScrollStackItem\");\n$RefreshReg$(_c2, \"ScrollStack\");","map":{"version":3,"names":["React","useRef","useLayoutEffect","useCallback","Lenis","jsxDEV","_jsxDEV","ScrollStackItem","children","itemClassName","className","trim","fileName","_jsxFileName","lineNumber","columnNumber","_c","ScrollStack","itemDistance","itemScale","itemStackDistance","stackPosition","scaleEndPosition","baseScale","rotationAmount","_s","scrollerRef","lenisRef","cardsRef","rafRef","parsePct","v","h","includes","parseFloat","update","scroller","current","y","scrollTop","clientHeight","stackY","endY","endEl","querySelector","endTop","offsetTop","scrollHeight","forEach","card","i","top","tStart","tEnd","pinStart","pinEnd","p","Math","max","scale","translateY","rot","style","transform","cards","Array","from","querySelectorAll","c","length","marginBottom","lenis","wrapper","content","duration","easing","t","min","smoothWheel","normalizeWheel","wheelMultiplier","touchMultiplier","lerp","syncTouch","syncTouchLerp","on","raf","requestAnimationFrame","cancelAnimationFrame","destroy","ref","height","_c2","$RefreshReg$"],"sources":["C:/Users/akmor/OneDrive/website/src/components/ScrollStack.js"],"sourcesContent":["import React, { useRef, useLayoutEffect, useCallback } from 'react';\r\nimport Lenis from 'lenis';\r\nimport './ScrollStack.css';\r\n\r\nexport const ScrollStackItem = ({ children, itemClassName = '' }) => (\r\n  <div className={`scroll-stack-card ${itemClassName}`.trim()}>{children}</div>\r\n);\r\n\r\nconst ScrollStack = ({\r\n  children,\r\n  className = '',\r\n  itemDistance = 80,\r\n  itemScale = 0.035,\r\n  itemStackDistance = 26,\r\n  stackPosition = '24%',\r\n  scaleEndPosition = '22%',\r\n  baseScale = 0.9,\r\n  rotationAmount = 10,\r\n}) => {\r\n  const scrollerRef = useRef(null);\r\n  const lenisRef = useRef(null);\r\n  const cardsRef = useRef([]);\r\n  const rafRef = useRef(null);\r\n\r\n  const parsePct = useCallback((v, h) => (typeof v === 'string' && v.includes('%') ? (parseFloat(v)/100)*h : parseFloat(v)), []);\r\n\r\n  const update = useCallback(() => {\r\n    const scroller = scrollerRef.current; if (!scroller) return;\r\n    const y = scroller.scrollTop; const h = scroller.clientHeight;\r\n    const stackY = parsePct(stackPosition, h); const endY = parsePct(scaleEndPosition, h);\r\n    const endEl = scroller.querySelector('.scroll-stack-end');\r\n    const endTop = endEl ? endEl.offsetTop : scroller.scrollHeight;\r\n    cardsRef.current.forEach((card, i) => {\r\n      const top = card.offsetTop;\r\n      const tStart = top - stackY - itemStackDistance*i;\r\n      const tEnd = top - endY;\r\n      const pinStart = tStart;\r\n      const pinEnd = endTop - h + stackY + itemStackDistance*(i+1);\r\n      const p = y<=tStart?0:y>=tEnd?1:(y - tStart) / Math.max(1, (tEnd - tStart));\r\n      const scale = 1 - p*(1 - (baseScale + i*itemScale));\r\n      const translateY = y < pinStart ? 0 : y <= pinEnd ? (y - top + stackY + itemStackDistance*i) : (pinEnd - top + stackY + itemStackDistance*i);\r\n      const rot = rotationAmount ? i*rotationAmount*p : 0;\r\n      card.style.transform = `translate3d(0, ${translateY}px, 0) scale(${scale}) rotate(${rot}deg)`;\r\n    });\r\n  }, [itemScale, itemStackDistance, stackPosition, scaleEndPosition, baseScale, rotationAmount, parsePct]);\r\n\r\n  useLayoutEffect(() => {\r\n    const scroller = scrollerRef.current; if (!scroller) return;\r\n    const cards = Array.from(scroller.querySelectorAll('.scroll-stack-card'));\r\n    cardsRef.current = cards;\r\n    cards.forEach((c, i) => { if (i<cards.length-1) c.style.marginBottom = `${itemDistance}px`; });\r\n\r\n    const lenis = new Lenis({ wrapper: scroller, content: scroller.querySelector('.scroll-stack-inner'), duration: 1.08, easing: t => Math.min(1, 1.001 - 2**(-10*t)), smoothWheel: true, normalizeWheel: true, wheelMultiplier: 1, touchMultiplier: 1, lerp: 0.09, syncTouch: true, syncTouchLerp: 0.09 });\r\n    lenis.on('scroll', update);\r\n    const raf = t => { lenis.raf(t); rafRef.current = requestAnimationFrame(raf); };\r\n    rafRef.current = requestAnimationFrame(raf);\r\n    lenisRef.current = lenis;\r\n    update();\r\n    return () => { if (rafRef.current) cancelAnimationFrame(rafRef.current); if (lenisRef.current) lenisRef.current.destroy(); };\r\n  }, [itemDistance, update]);\r\n\r\n  return (\r\n    <div className={`scroll-stack-scroller ${className}`.trim()} ref={scrollerRef}>\r\n      <div className=\"scroll-stack-inner\">\r\n        {/* top spacer ensures first card isn't clipped */}\r\n        <div style={{height: 12}} />\r\n        {children}\r\n        {/* bottom spacer ensures last release within bounds */}\r\n        <div style={{height: 36}} />\r\n        <div className=\"scroll-stack-end\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollStack;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}